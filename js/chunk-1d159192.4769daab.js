(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d159192"],{1964:function(t,e,a){},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("d3b7");function i(t,e,a,i,n,r,s){try{var o=t[r](s),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(i,n)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){i(s,n,r,o,l,"next",t)}function l(t){i(s,n,r,o,l,"throw",t)}o(void 0)}))}}},2836:function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("6b75");function n(t){if(Array.isArray(t))return Object(i["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||r(t)||Object(s["a"])(t)||o()}},4132:function(t,e,a){},"79e1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("page-header-wrapper",[i("a-card",{attrs:{bordered:!1}},[i("div",{staticClass:"table-page-search-wrapper"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"商品类型"}},[i("a-select",{attrs:{placeholder:"请选择商品类型"},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[i("a-select-option",{attrs:{value:this.productConfig.productType.realProduct}},[e._v("实物商品")]),i("a-select-option",{attrs:{value:this.productConfig.productType.purchaseService}},[e._v("购房服务")]),i("a-select-option",{attrs:{value:this.productConfig.productType.purchaseCourse}},[e._v("购房讲堂")])],1)],1)],1),i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"商品 id"}},[i("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.id,callback:function(t){e.$set(e.queryParam,"id",t)},expression:"queryParam.id"}})],1)],1),e.advanced?[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"状态"}},[i("a-select",{attrs:{placeholder:"请选择状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[i("a-select-option",{attrs:{value:this.productConfig.productStatus.selling}},[e._v("售卖中")]),i("a-select-option",{attrs:{value:this.productConfig.productStatus.sellOut}},[e._v("已售完")]),i("a-select-option",{attrs:{value:this.productConfig.productStatus.undercarriage}},[e._v("已下架")])],1)],1)],1),i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"商品名称"}},[i("a-input",{attrs:{placeholder:"商品名称"},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),e.isNotVUser?i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"所属大V"}},[i("div",{staticClass:"select-v",on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])])],1):e._e()]:e._e(),i("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.queryParam={},t.vData={name:""}}}},[e._v("重置")]),i("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),i("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1),e.isNotVUser?i("div",{staticClass:"table-operator"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建")])],1):e._e(),i("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,scroll:{x:!0},showPagination:"auto"},scopedSlots:e._u([{key:"type",fn:function(t){return i("span",{},[e._v(" "+e._s(e.getProductType(t))+" ")])}},{key:"num",fn:function(t){return i("span",{},[e._v(" "+e._s(t<=0?"-":t)+" ")])}},{key:"price",fn:function(t){return i("span",{},[e._v(" ¥"+e._s(parseFloat((t/100).toString()).toFixed(2))+" ")])}},{key:"status",fn:function(t,a){return i("span",{},[e._v(" "+e._s(e.getProductStatus(a))+" ")])}},{key:"useStatus",fn:function(t,a){return i("span",{},[e._v(" "+e._s(a.drawNum)+"/"+e._s(a.useNum)+"/"+e._s(a.grantNum)+" ")])}},{key:"time",fn:function(t,a){return i("span",{},[e._v(" "+e._s(a.startTime)+"-"+e._s(a.endTime)+" ")])}},{key:"action",fn:function(t,a){return i("span",{},[[i("a",{on:{click:function(t){return e.edit(a)}}},[e._v("编辑")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.deleteProduct(a)}}},[e._v("删除")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.action(a)}}},[e._v(e._s(e.getProductActionStatus(a.status)))])]],2)}}])}),i("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}}),e.productEditVisible?i("product-edit",{attrs:{visible:e.productEditVisible,data:e.data},on:{cancel:e.handleProductEditCancel,ok:e.handleProductEditOk}}):e._e()],1)],1)},n=[],r=(a("d3b7"),a("25f0"),a("2af9")),s=a("0fea"),o=a("a754"),l=a("ca00"),c=a("a078"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"编辑商品",width:1200,visible:t.visible,footer:null,destroyOnClose:""},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"优惠券类型",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},required:!0}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}]},[t.isVUser()?t._e():a("a-radio",{attrs:{value:this.productConfig.productType.realProduct}},[t._v("实物商品")]),a("a-radio",{attrs:{value:this.productConfig.productType.purchaseService}},[t._v("购房服务")]),a("a-radio",{attrs:{value:this.productConfig.productType.purchaseCourse}},[t._v("购房讲堂")])],1)],1),a("a-form-item",{attrs:{label:"商品标题",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入商品标题"}],initialValue:this.data.title}],expression:"[\n            'title',\n            {rules: [{ required: true, message: '请输入商品标题' }], initialValue: this.data.title}\n          ]"}],attrs:{name:"name",placeholder:"商品标题"}})],1),a("a-form-item",{attrs:{label:"商品副标题",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["subTitle",{rules:[{required:!0,message:"请输入商品副标题"}],initialValue:this.data.subTitle}],expression:"[\n            'subTitle',\n            {rules: [{ required: true, message: '请输入商品副标题' }], initialValue: this.data.subTitle}\n          ]"}],attrs:{name:"name",placeholder:"商品副标题"}})],1),a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"商品图片",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["photo",{rules:[{required:!0,message:"请选择商品图片"}],initialValue:this.data.photo.key}],expression:"[\n            'photo',\n            {rules: [{ required: true, message: '请选择商品图片' }], initialValue: this.data.photo.key}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:t.getUploadPic,data:t.getData,headers:{Authorization:"Bearer "+t.token},"before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.photo?a("img",{staticClass:"photo",attrs:{src:t.photo,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(" 上传 ")])],1)]),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[t._v("图片建议尺寸320*290px")])],1),a("a-form-item",{attrs:{label:"商品售价",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"请输入商品售价"}],initialValue:(this.data.price?this.data.price:0)/100}],expression:"[\n            'price',\n            {rules: [{ required: true, message: '请输入商品售价' }], initialValue: (this.data.price ? this.data.price : 0) / 100}\n          ]"}],attrs:{name:"name",prefix:"￥",suffix:"元",placeholder:"商品售价"}})],1),a("a-form-item",{attrs:{label:"商品原价",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["originPrice",{initialValue:(this.data.originPrice?this.data.originPrice:0)/100}],expression:"[\n            'originPrice',\n            { initialValue: (this.data.originPrice ? this.data.originPrice : 0) / 100 }\n          ]"}],attrs:{name:"name",prefix:"￥",suffix:"元",placeholder:"商品原价"}})],1),t.form.getFieldValue("type")===t.productConfig.productType.realProduct?a("a-form-item",{attrs:{label:"商品数量",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num",{rules:[{required:t.form.getFieldValue("type")===t.productConfig.productType.realProduct,message:"请填写商品数量"}],initialValue:this.data.num}],expression:"[\n            'num',\n            {rules: [{ required: form.getFieldValue('type') === productConfig.productType.realProduct, message: '请填写商品数量' }], initialValue: this.data.num}\n          ]"}],attrs:{placeholder:"商品数量"}})],1):t._e(),a("a-form-item",{attrs:{label:"虚拟购买人数",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["virtualNum",{rules:[{required:!0,message:"请输入虚拟购买人数"}],initialValue:this.data.virtualNum}],expression:"[\n            'virtualNum',\n            {rules: [{ required: true, message: '请输入虚拟购买人数',}], initialValue: this.data.virtualNum }\n          ]"}],attrs:{min:1,placeholder:"虚拟购买人数"}})],1),t.form.getFieldValue("type")===this.productConfig.productType.realProduct||t.isVUser()?t._e():a("a-form-item",{attrs:{label:"所属大V",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["vId",{rules:[{required:t.form.getFieldValue("type")!==this.productConfig.productType.realProduct,message:"请选择大V"}],initialValue:this.data.vId}],expression:"[\n            'vId',\n            {rules: [{ required: form.getFieldValue('type') !== this.productConfig.productType.realProduct, message: '请选择大V' }], initialValue: this.data.vId}\n          ]"}],staticClass:"select-v",attrs:{name:"vId"},on:{click:t.selectVData}},[t._v(t._s(t.vData.name))])]),t.form.getFieldValue("type")===t.productConfig.productType.purchaseCourse?a("a-form-item",{attrs:{label:"商品内容标题",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["cId",{rules:[{required:!0,message:"请选择商品内容标题"}],initialValue:this.data.cId}],expression:"[\n            `cId`,\n            {rules: [{ required: true, message: '请选择商品内容标题' }], initialValue: this.data.cId}\n          ]"}],staticClass:"select-v",on:{click:function(e){return t.selectProduct()}}},[t._v(" "+t._s(t.contentTitle)+" ")])]):t._e(),t.form.getFieldValue("type")===t.productConfig.productType.purchaseCourse?a("a-form-item",{attrs:{label:"商品内容封面",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["cId",{rules:[{required:!0,message:"请选择商品内容封面"}],initialValue:this.data.cId}],expression:"[\n            `cId`,\n            {rules: [{ required: true, message: '请选择商品内容封面' }], initialValue: this.data.cId}\n          ]"}],staticClass:"content-container",on:{click:function(e){return t.selectProduct()}}},[t.cId?t._e():a("a-icon",{attrs:{type:"plus"}}),t.cId?a("img",{staticClass:"photo",attrs:{src:t.cPhoto,alt:"avatar"}}):t._e()],1)]):t._e(),a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"其他图片",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{staticClass:"clearfix"},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileList",{initialValue:t.fileList}],expression:"[\n              'fileList',\n              {initialValue: fileList}\n            ]"}],attrs:{"list-type":"picture-card","file-list":t.fileList,multiple:"",action:t.getUploadPic,data:t.getData,headers:{Authorization:"Bearer "+t.token}},on:{preview:t.handlePreview,change:t.handleFileListChange}},[t.fileList.length<3?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(" 上传 ")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[t._v("图片建议尺寸750px")])]),t.form.getFieldValue("type")===t.productConfig.productType.realProduct?a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"轮播图",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{staticClass:"clearfix"},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["bannerList",{initialValue:t.bannerList,rules:[{required:t.form.getFieldValue("type")===t.productConfig.productType.realProduct,message:"请选择轮播图"}]}],expression:"[\n              'bannerList',\n              {initialValue: bannerList, rules: [{ required: form.getFieldValue('type') === productConfig.productType.realProduct, message: '请选择轮播图' }]}\n            ]"}],attrs:{"list-type":"picture-card","file-list":t.bannerList,multiple:"",action:t.getUploadPic,data:t.getData,headers:{Authorization:"Bearer "+t.token}},on:{preview:t.handlePreview,change:t.handleBannerListChange}},[t.bannerList.length<10?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(" 上传 ")])],1):t._e()])],1),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[t._v("图片建议尺寸750px")])]):t._e(),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[t._v(t._s(t.$t("form.basic-form.form.submit")))])],1)],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})]),a("select-v",{attrs:{visible:t.vModelVisible},on:{cancel:t.handleSelectVCancel,ok:t.handleSelectVOk}}),t.contentVisible?a("content-list",{attrs:{visible:t.contentVisible},on:{cancel:t.handleSelectContentCancel,ok:t.handleSelectContentOk}}):t._e()],1)],1)},u=[],p=a("1da1"),m=a("2909"),f=a("5530"),v=(a("96cf"),a("d81d"),a("99af"),a("b0c0"),a("8ded")),h=a.n(v),b=a("9fb0"),g=a("88c1");function y(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}function C(t){return new Promise((function(e,a){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)},i.onerror=function(t){return a(t)}}))}var w={props:{visible:{type:Boolean,required:!0},data:{type:Object,required:!0}},components:{SelectV:o["a"],ContentList:g["a"]},data:function(){return this.productConfig=c["j"],{form:"",vData:{name:this.data.vname,vId:this.data.vId},contentTitle:this.data.cTitle,vModelVisible:!1,contentVisible:!1,previewVisible:!1,previewImage:"",fileList:[],bannerList:[],token:h.a.get(b["a"]),loading:!1,photo:this.data.photo.url,cId:this.data.cId,cPhoto:this.data.pic?this.data.pic.url:""}},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){if(!t){var i,n,r,o,c,d,u;if(a.photo.file)if(200!==(null===(c=a.photo)||void 0===c||null===(d=c.file)||void 0===d||null===(u=d.response)||void 0===u?void 0:u.code))return void e.$notification.error({message:"图片上传失败, 请重新上传"});var p=parseFloat(a.price);if(isNaN(p))return void e.$notification.error({message:"输入的商品售价不是数字"});if(p<0)return void e.$notification.error({message:"输入的商品售价不能小于 0"});var v=parseFloat(a.originPrice);if(a.originPrice){if(isNaN(v))return void e.$notification.error({message:"输入的商品原价不是数字"});if(v<0)return void e.$notification.error({message:"输入的商品原价不能小于 0"})}var h=Object(f["a"])(Object(f["a"])({id:e.data.id},a),{},{vId:a.vId||Object(l["t"])(),originPrice:100*v,price:100*p,photo:a.photo.file?null===(i=a.photo)||void 0===i||null===(n=i.file)||void 0===n||null===(r=n.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.key:a.photo});if(a.fileList){var b=[];a.fileList instanceof Array&&a.fileList.map((function(t,e){var a,i,n,r;"done"===(null===t||void 0===t?void 0:t.status)&&(b=null!==t&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.key?[].concat(Object(m["a"])(b),[null===t||void 0===t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.key]):[].concat(Object(m["a"])(b),[null===t||void 0===t?void 0:t.name]))})),a.fileList.fileList&&a.fileList.fileList.map((function(t,e){var a,i,n,r;"done"===(null===t||void 0===t?void 0:t.status)&&(b=null!==t&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.key?[].concat(Object(m["a"])(b),[null===t||void 0===t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.key]):[].concat(Object(m["a"])(b),[null===t||void 0===t?void 0:t.name]))})),h=Object(f["a"])(Object(f["a"])({},h),{},{pics:b,fileList:null})}if(a.bannerList){var g=[];a.bannerList instanceof Array&&a.fileList.map((function(t,e){var a,i,n,r;"done"===(null===t||void 0===t?void 0:t.status)&&(g=null!==t&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.key?[].concat(Object(m["a"])(g),[null===t||void 0===t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.key]):[].concat(Object(m["a"])(g),[null===t||void 0===t?void 0:t.name]))})),a.bannerList.fileList&&a.bannerList.fileList.map((function(t,e){var a,i,n,r;"done"===(null===t||void 0===t?void 0:t.status)&&(g=null!==t&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.key?[].concat(Object(m["a"])(g),[null===t||void 0===t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.key]):[].concat(Object(m["a"])(g),[null===t||void 0===t?void 0:t.name]))})),h=Object(f["a"])(Object(f["a"])({},h),{},{banners:g,bannerList:null})}Object(s["lb"])(h).then((function(t){e.$emit("ok"),e.$notification.success({message:"修改成功"})}))}}))},selectProduct:function(){this.contentVisible=!0},isVUser:function(){return Object(l["z"])()},handleSelectContentCancel:function(){this.contentVisible=!1},handleSelectContentOk:function(t){this.contentVisible=!1,this.cId=t.id,this.cPhoto=t.pic.url,this.contentTitle=t.title,this.form.setFieldsValue({cId:t.id})},getUploadPic:function(){return Object(l["s"])()},selectVData:function(t){t.preventDefault(),this.vModelVisible=!0},handleSelectVCancel:function(){this.vModelVisible=!1},handleSelectVOk:function(t){this.vModelVisible=!1,null!==t&&void 0!==t&&""!==t&&(this.vData=t,this.form.setFieldsValue({vId:t.id}))},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,C(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleFileListChange:function(t){var e=t.fileList;this.fileList=e},handleBannerListChange:function(t){var e=t.fileList;this.bannerList=e},handleChange:function(t){var e=this;"uploading"!==t.file.status?"done"===t.file.status&&y(t.file.originFileObj,(function(t){e.photo=t,e.loading=!1})):this.loading=!0},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("You can only upload JPG file!"),e},getData:function(t){return{file:t}}},created:function(){var t=this;this.form=this.$form.createForm(this),this.form.getFieldDecorator("type",{initialValue:this.data.type.toString(),preserve:!0}),this.data.pics&&this.data.pics.map((function(e,a){t.fileList=[].concat(Object(m["a"])(t.fileList),[{uid:a,name:e.key,status:"done",url:e.url}])})),this.data.banners&&this.data.banners.map((function(e,a){t.bannerList=[].concat(Object(m["a"])(t.bannerList),[{uid:a,name:e.key,status:"done",url:e.url}])}))}},x=w,V=(a("c116"),a("2877")),k=Object(V["a"])(x,d,u,!1,null,"49512ff4",null),_=k.exports,P=[{title:"商品id",dataIndex:"id"},{title:"商品名称",dataIndex:"title"},{title:"商品类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"所属大V",dataIndex:"vname"},{title:"价格",scopedSlots:{customRender:"price"},dataIndex:"price"},{title:"销量",dataIndex:"saleNum"},{title:"库存",scopedSlots:{customRender:"num"},dataIndex:"num"},{title:"状态",scopedSlots:{customRender:"status"},dataIndex:"status"},{title:"最近更新时间",dataIndex:"updateTime",sorter:!0},{title:"最近更新人",dataIndex:"updateUsername"},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],S={name:"CouponList",components:{STable:r["c"],Ellipsis:r["b"],SelectV:o["a"],ProductEdit:_},data:function(){var t=this;return this.columns=P,this.productConfig=c["j"],{visible:!1,productEditVisible:!1,cId:"",mdl:null,advanced:!1,vData:{name:""},isNotVUser:!Object(l["z"])(),data:{},queryParam:{},loadData:function(e){var a=Object.assign({vId:Object(l["z"])()?Object(l["t"])():""},e,t.queryParam);return Object(s["bb"])(a).then((function(t){return{data:t.data.list,total:t.data.total,page:a.page}}))}}},methods:{handleAdd:function(){this.$router.push("/product/create-product")},selectVData:function(t){t.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleProductEditCancel:function(){this.productEditVisible=!1},handleProductEditOk:function(){this.productEditVisible=!1,this.$refs.table.loadData()},handleSelectVOk:function(t){this.visible=!1,null!==t&&void 0!==t&&""!==t&&(this.vData=t,this.queryParam.vId=t.id)},getProductType:function(t){return Object(l["o"])(null===t||void 0===t?void 0:t.toString())},getProductStatus:function(t){return Object(l["n"])(t)},edit:function(t){this.productEditVisible=!0,this.data=t},deleteProduct:function(t){var e=this;this.$confirm({title:"确定要删除该商品吗?",content:"删除后无法复原,请谨慎",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(s["r"])(t.id).then((function(t){e.$notification.success({message:"删除成功"}),e.$refs.table.loadData()}))}})},action:function(t){var e=this;t.status.toString()===c["j"].productStatus.undercarriage?Object(s["A"])(t.id).then((function(t){e.$refs.table.loadData()})):Object(s["sb"])(t.id).then((function(t){e.$refs.table.loadData()}))},toggleAdvanced:function(){this.advanced=!this.advanced},getProductActionStatus:function(t){return t.toString()===c["j"].productStatus.undercarriage?"上架":"下架"}}},I=S,O=(a("a684"),Object(V["a"])(I,i,n,!1,null,null,null));e["default"]=O.exports},"88c1":function(t,e,a){"use strict";var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("a-modal",{attrs:{title:"选择内容",width:1200,visible:e.visible,footer:null,destroyOnClose:""},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[i("div",{staticClass:"table-page-search-wrapper"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"内容标题"}},[i("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),i("a-col",{attrs:{md:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),i("div",{staticClass:"table-operator"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建")])],1),i("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",scroll:{x:!0},columns:e.columns,data:e.loadData,showPagination:"auto"},scopedSlots:e._u([{key:"pic",fn:function(t){return i("span",{},[i("img",{staticClass:"activity-pic",attrs:{src:t?t.url:"",alt:"活动图片"}})])}},{key:"status",fn:function(t){return i("span",{},[e._v(" "+e._s(e.getContentStatus(t.toString()))+" ")])}},{key:"des",fn:function(t){return i("span",{},[i("ellipsis",{attrs:{length:50,tooltip:""}},[e._v(" "+e._s(t)+" ")])],1)}},{key:"action",fn:function(t,a){return i("span",{},[[i("a",{on:{click:function(){e.$emit("ok",a)}}},[e._v("选择")])]],2)}}])})],1)},n=[],r=a("2af9"),s=a("0fea"),o=a("ca00"),l=a("a078"),c=[{title:"内容id",dataIndex:"id"},{title:"所属大V",dataIndex:"vname"},{title:"内容标题",dataIndex:"title"},{title:"内容描述",dataIndex:"des",scopedSlots:{customRender:"des"}},{title:"封面图片",dataIndex:"pic",scopedSlots:{customRender:"pic"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"最近更新人",dataIndex:"updateUsername"},{title:"更新时间",dataIndex:"updateTime"},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],d={props:{visible:{type:Boolean,required:!0}},components:{STable:r["c"],Ellipsis:r["b"]},data:function(){var t=this;return this.columns=c,this.contentConfig=l["d"],{queryParam:{},advanced:!1,loadData:function(e){var a=Object.assign({vId:Object(o["z"])()?Object(o["t"])():t.id,status:t.contentConfig.contentStatus.normal},e,t.queryParam);return Object(s["L"])(a).then((function(t){return{data:t.data.list,page:a.page,total:t.data.total}}))}}},methods:{handleAdd:function(){this.$router.push("/content/create-content")},getContentStatus:function(t){return Object(o["d"])(t)}},created:function(){}},u=d,p=(a("9057"),a("2877")),m=Object(p["a"])(u,i,n,!1,null,null,null);e["a"]=m.exports},9057:function(t,e,a){"use strict";a("2836")},a684:function(t,e,a){"use strict";a("1964")},a754:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择大V",width:1200,visible:t.visible,footer:null},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"大V名字"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.phone,callback:function(e){t.$set(t.queryParam,"phone",e)},expression:"queryParam.phone"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")])],1)])],1)],1)],1),this.selectedRowKeys.length>0?a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary"},on:{click:t.selectUser}},[t._v("选择")])],1):t._e(),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"vId",columns:t.columns,data:t.loadData,alert:this.isMultiple?t.options.alert:null,rowSelection:this.isMultiple?t.options.rowSelection:null,showPagination:"auto"},scopedSlots:t._u([{key:"avatar",fn:function(t){return a("span",{},[a("a-avatar",{attrs:{src:t}})],1)}},{key:"action",fn:function(e,i){return a("span",{},[[a("a",{on:{click:function(){t.$emit("ok",Object.assign({},i,{id:i.vId}))}}},[t._v("选择")])]],2)}}])})],1)},n=[],r=a("5530"),s=(a("d81d"),a("b0c0"),a("2af9")),o=a("0fea"),l=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],c=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"}],d={props:{visible:{type:Boolean,required:!0},isMultiple:{type:Boolean},selectKeys:{type:Array,default:function(){return[]}},selectRows:{type:Array,default:function(){return[]}}},components:{STable:s["c"]},methods:{onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},selectUser:function(){var t="",e="";this.selectedRows.map((function(a){t+=a.vId+",",e+=a.name+","})),t=t.substring(0,t.length-1),e=e.substring(0,e.length-1),this.$emit("ok",{name:e,id:t})}},data:function(){var t=this;return this.columns=this.isMultiple?c:l,{queryParam:{},selectedRowKeys:this.selectKeys,selectedRows:this.selectRows,options:{alert:{show:!0,clear:function(){t.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectKeys,onChange:this.onSelectChange}},optionAlertShow:!1,loadData:function(e){var a=Object.assign({},e,t.queryParam);return Object(o["eb"])(a).then((function(t){return Object(r["a"])(Object(r["a"])({},t.data),{},{page:a.page})}))}}},created:function(){}},u=d,p=a("2877"),m=Object(p["a"])(u,i,n,!1,null,null,null);e["a"]=m.exports},c116:function(t,e,a){"use strict";a("4132")}}]);