(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-048b4d6f"],{"282f":function(e,a,t){"use strict";t("f84c")},a754:function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"选择大V",width:1200,visible:e.visible,footer:null},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"大V名字"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.name,callback:function(a){e.$set(e.queryParam,"name",a)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"手机号"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.phone,callback:function(a){e.$set(e.queryParam,"phone",a)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),this.selectedRowKeys.length>0?t("div",{staticClass:"table-operator"},[t("a-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("选择")])],1):e._e(),t("s-table",{ref:"table",attrs:{size:"default",rowKey:"vId",columns:e.columns,data:e.loadData,alert:this.isMultiple?e.options.alert:null,rowSelection:this.isMultiple?e.options.rowSelection:null,showPagination:"auto"},scopedSlots:e._u([{key:"avatar",fn:function(e){return t("span",{},[t("a-avatar",{attrs:{src:e}})],1)}},{key:"action",fn:function(a,s){return t("span",{},[[t("a",{on:{click:function(){e.$emit("ok",Object.assign({},s,{id:s.vId}))}}},[e._v("选择")])]],2)}}])})],1)},r=[],n=t("5530"),l=(t("d81d"),t("b0c0"),t("2af9")),i=t("0fea"),o=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],d=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"}],c={props:{visible:{type:Boolean,required:!0},isMultiple:{type:Boolean},selectKeys:{type:Array,default:function(){return[]}},selectRows:{type:Array,default:function(){return[]}}},components:{STable:l["c"]},methods:{onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},selectUser:function(){var e="",a="";this.selectedRows.map((function(t){e+=t.vId+",",a+=t.name+","})),e=e.substring(0,e.length-1),a=a.substring(0,a.length-1),this.$emit("ok",{name:a,id:e})}},data:function(){var e=this;return this.columns=this.isMultiple?d:o,{queryParam:{},selectedRowKeys:this.selectKeys,selectedRows:this.selectRows,options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectKeys,onChange:this.onSelectChange}},optionAlertShow:!1,loadData:function(a){var t=Object.assign({},a,e.queryParam);return Object(i["eb"])(t).then((function(e){return Object(n["a"])(Object(n["a"])({},e.data),{},{page:t.page})}))}}},created:function(){}},u=c,m=t("2877"),p=Object(m["a"])(u,s,r,!1,null,null,null);a["a"]=p.exports},d7a1:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("page-header-wrapper",[t("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"表单名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入表单名称"}]}],expression:"[\n            'title',\n            {rules: [{ required: true, message: '请输入表单名称' }]}\n          ]"}],attrs:{placeholder:"表单名称"}})],1),e.isNotVUser?t("a-form-item",{attrs:{label:"关联大V",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["vId",{rules:[{required:!0,message:"请选择大V"}]}],expression:"[\n            'vId',\n            {rules: [{ required: true, message: '请选择大V' }]}\n          ]"}],staticClass:"select-v",attrs:{name:"vId"},on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])]):e._e(),t("a-form-item",{attrs:{label:"表单描述",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["des"],expression:"[\n            'des',\n          ]"}],attrs:{rows:"4",name:"des",placeholder:"表单描述"}})],1),t("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"表单头图",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["headImg",{rules:[{required:!0,message:"请选择表单头图"}]}],expression:"[\n            'headImg',\n            {rules: [{ required: true, message: '请选择表单头图' }]}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:e.getUploadPic,data:e.getData,headers:{Authorization:"Bearer "+e.token},"before-upload":e.beforeUpload},on:{change:e.handleHeadImgChange}},[e.headImg?t("img",{staticClass:"pic",attrs:{src:e.headImg,alt:"avatar"}}):t("div",[t("a-icon",{attrs:{type:e.headImgLoading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),t("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸200*200px")])],1),t("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"表单分享图",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["shareImg",{rules:[{required:!0,message:"请选择表单分享图"}]}],expression:"[\n            'shareImg',\n            {rules: [{ required: true, message: '请选择表单分享图' }]}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:e.getUploadPic,data:e.getData,headers:{Authorization:"Bearer "+e.token},"before-upload":e.beforeUpload},on:{change:e.handleShareImgChange}},[e.shareImg?t("img",{staticClass:"pic",attrs:{src:e.shareImg,alt:"avatar"}}):t("div",[t("a-icon",{attrs:{type:e.shareImgLoading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),t("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸200*200px")])],1),t("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))])],1)],1),t("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}})],1)],1)},r=[],n=t("a754"),l=t("9fb0"),i=t("8ded"),o=t.n(i),d=t("218c"),c=t.n(d),u=t("0fea"),m=t("ca00");function p(e,a){var t=new FileReader;t.addEventListener("load",(function(){return a(t.result)})),t.readAsDataURL(e)}var h={name:"CreateContent",components:{SelectV:n["a"]},data:function(){return{form:this.$form.createForm(this),vData:{name:""},isNotVUser:!Object(m["z"])(),headImgLoading:!1,headImg:"",shareImg:"",shareImgLoading:!1,visible:!1,token:o.a.get(l["a"])}},methods:{handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){if(!e){var s,r,n,l,i,o,d,p,h,v,f,g,b,y;if(200!==(null===(s=t.headImg)||void 0===s||null===(r=s.file)||void 0===r||null===(n=r.response)||void 0===n?void 0:n.code))return void c.a.error({message:"图片上传失败, 请重新上传"});if(200!==(null===(l=t.shareImg)||void 0===l||null===(i=l.file)||void 0===i||null===(o=i.response)||void 0===o?void 0:o.code))return void c.a.error({message:"图片上传失败, 请重新上传"});var I={vid:t.vId||Object(m["t"])(),title:t.title,des:t.des,headImg:null===(d=t.headImg)||void 0===d||null===(p=d.file)||void 0===p||null===(h=p.response)||void 0===h||null===(v=h.data)||void 0===v?void 0:v.key,shareImg:null===(f=t.shareImg)||void 0===f||null===(g=f.file)||void 0===g||null===(b=g.response)||void 0===b||null===(y=b.data)||void 0===y?void 0:y.key};Object(u["h"])(I).then((function(e){a.$notification.success({message:"新建成功"}),a.$router.push("/form/form-list")}))}}))},getUploadPic:function(){return Object(m["s"])()},selectVData:function(e){e.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleSelectVOk:function(e){this.visible=!1,null!==e&&void 0!==e&&""!==e&&(this.vData=e,this.form.setFieldsValue({vId:e.id}))},handleHeadImgChange:function(e){var a=this;"uploading"!==e.file.status?"done"===e.file.status&&p(e.file.originFileObj,(function(e){a.headImg=e,a.headImgLoading=!1})):this.headImgLoading=!0},handleShareImgChange:function(e){var a=this;"uploading"!==e.file.status?"done"===e.file.status&&p(e.file.originFileObj,(function(e){a.shareImg=e,a.shareImgLoading=!1})):this.shareImgLoading=!0},beforeUpload:function(e){var a="image/jpeg"===e.type||"image/png"===e.type;return a||this.$message.error("You can only upload JPG file!"),a},getData:function(e){return{file:e}}}},v=h,f=(t("282f"),t("2877")),g=Object(f["a"])(v,s,r,!1,null,"7520197c",null);a["default"]=g.exports},f84c:function(e,a,t){}}]);