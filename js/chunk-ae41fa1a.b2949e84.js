(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae41fa1a"],{"15c2":function(e,t,a){},"1b2d":function(e,t,a){"use strict";a("15c2")},"6c28":function(e,t,a){},8096:function(e,t,a){},"86d7":function(e,t,a){"use strict";a("6c28")},"9bda":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("page-header-wrapper",[i("a-card",{attrs:{bordered:!1}},[i("div",{staticClass:"table-page-search-wrapper"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"内容标题"}},[i("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.title,callback:function(e){t.$set(t.queryParam,"title",e)},expression:"queryParam.title"}})],1)],1),t.isNotVUser?i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"所属大V"}},[i("div",{staticClass:"select-v",on:{click:t.selectVData}},[t._v(t._s(t.vData.name))])])],1):t._e(),i("a-col",{attrs:{md:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[i("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){e.queryParam={},e.vData={name:""}}}},[t._v("重置")])],1)])],1)],1)],1),i("div",{staticClass:"table-operator"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新建")])],1),i("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",scroll:{x:!0},columns:t.columns,data:t.loadData,showPagination:"auto"},scopedSlots:t._u([{key:"linkUrl",fn:function(e){return i("span",{},[i("img",{staticClass:"pic",attrs:{src:e||"",alt:"填写链接"}})])}},{key:"action",fn:function(e,a){return i("span",{},[[i("a",{on:{click:function(e){return t.edit(a)}}},[t._v("编辑")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(e){return t.deleteForm(a)}}},[t._v("删除")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(e){return t.writeData(a)}}},[t._v("数据")])]],2)}}])}),i("select-v",{attrs:{visible:t.visible},on:{cancel:t.handleSelectVCancel,ok:t.handleSelectVOk}}),t.formDataVisible?i("form-data",{attrs:{visible:t.formDataVisible,"f-id":t.fId},on:{cancel:t.handleFormDataCancel,ok:t.handleFormDataOk}}):t._e(),t.formEditVisible?i("form-edit",{attrs:{visible:t.formEditVisible,id:t.fId},on:{cancel:t.handleFormEditCancel,ok:t.handleFormEditOk}}):t._e()],1)],1)},n=[],s=a("2af9"),l=a("0fea"),r=a("a754"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑内容",width:1200,visible:e.visible,footer:null,destroyOnClose:""},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"表单名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入表单名称"}],initialValue:e.data.title}],expression:"[\n            'title',\n            {rules: [{ required: true, message: '请输入表单名称' }], initialValue: data.title}\n          ]"}],attrs:{placeholder:"表单名称"}})],1),e.isNotVUser?a("a-form-item",{attrs:{label:"关联大V",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["vId",{rules:[{required:!0,message:"请选择大V"}],initialValue:e.data.vid}],expression:"[\n            'vId',\n            {rules: [{ required: true, message: '请选择大V' }], initialValue: data.vid}\n          ]"}],staticClass:"select-v",attrs:{name:"vId"},on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])]):e._e(),a("a-form-item",{attrs:{label:"表单描述",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["des",{initialValue:e.data.des}],expression:"[\n            'des',\n            { initialValue: data.des }\n          ]"}],attrs:{rows:"4",name:"des",placeholder:"表单描述"}})],1),a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"表单头图",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["headImg",{rules:[{required:!0,message:"请选择表单头图"}],initialValue:e.headImgKey}],expression:"[\n            'headImg',\n            {rules: [{ required: true, message: '请选择表单头图' }], initialValue: headImgKey}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:e.getUploadPic,data:e.getData,headers:{Authorization:"Bearer "+e.token},"before-upload":e.beforeUpload},on:{change:e.handleHeadImgChange}},[e.headImg?a("img",{staticClass:"pic",attrs:{src:e.headImg,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.headImgLoading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸200*200px")])],1),a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"表单分享图",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["shareImg",{rules:[{required:!0,message:"请选择表单分享图"}],initialValue:e.shareImgKey}],expression:"[\n            'shareImg',\n            {rules: [{ required: true, message: '请选择表单分享图' }], initialValue: shareImgKey}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:e.getUploadPic,data:e.getData,headers:{Authorization:"Bearer "+e.token},"before-upload":e.beforeUpload},on:{change:e.handleShareImgChange}},[e.shareImg?a("img",{staticClass:"pic",attrs:{src:e.shareImg,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.shareImgLoading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸200*200px")])],1),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))])],1)],1),a("select-v",{attrs:{visible:e.vModelVisible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}})],1)],1)},d=[],c=a("5530"),u=(a("b0c0"),a("8096"),a("8ded")),m=a.n(u),h=a("9fb0"),p=a("ca00");function f(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var v={props:{visible:{type:Boolean,required:!0},id:{type:String,required:!0}},components:{SelectV:r["a"]},data:function(){return{form:"",vData:{name:""},data:{},vModelVisible:!1,token:m.a.get(h["a"]),headImgLoading:!1,headImg:"",headImgKey:"",isNotVUser:!Object(p["z"])(),shareImg:"",shareImgKey:"",shareImgLoading:!1}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){var i,n,s,r,o,d,u,m,h,f,v,g,b,I;if(a.headImg.file)if(200!==(null===(h=a.headImg)||void 0===h||null===(f=h.file)||void 0===f||null===(v=f.response)||void 0===v?void 0:v.code))return void t.$notification.error({message:"图片上传失败, 请重新上传"});if(a.shareImg.file)if(200!==(null===(g=a.shareImg)||void 0===g||null===(b=g.file)||void 0===b||null===(I=b.response)||void 0===I?void 0:I.code))return void t.$notification.error({message:"图片上传失败, 请重新上传"});var y=Object(c["a"])(Object(c["a"])({id:t.data.id},a),{},{vid:a.vId||Object(p["t"])(),shareImg:a.shareImg.file?null===(i=a.shareImg)||void 0===i||null===(n=i.file)||void 0===n||null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.key:a.shareImg,headImg:a.headImg.file?null===(o=a.headImg)||void 0===o||null===(d=o.file)||void 0===d||null===(u=d.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.key:a.headImg});Object(l["w"])(y).then((function(e){t.$emit("ok"),t.$notification.success({message:"修改成功"})}))}}))},getUploadPic:function(){return Object(p["s"])()},selectVData:function(e){e.preventDefault(),this.vModelVisible=!0},handleSelectVCancel:function(){this.vModelVisible=!1},handleSelectVOk:function(e){this.vModelVisible=!1,null!==e&&void 0!==e&&""!==e&&(this.vData=e,this.form.setFieldsValue({vId:e.id}))},handleHeadImgChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&f(e.file.originFileObj,(function(e){t.headImg=e,t.headImgLoading=!1})):this.headImgLoading=!0},handleShareImgChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&f(e.file.originFileObj,(function(e){t.shareImg=e,t.shareImgLoading=!1})):this.shareImgLoading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("You can only upload JPG file!"),t},getData:function(e){return{file:e}}},created:function(){var e=this;this.form=this.$form.createForm(this),Object(l["U"])(this.id).then((function(t){e.data=t.data,e.vData.name=t.data.vname,e.headImg=t.data.headImg.url,e.shareImg=t.data.shareImg.url,e.headImgKey=t.data.headImg.key,e.shareImgKey=t.data.shareImg.key}))}},g=v,b=(a("86d7"),a("2877")),I=Object(b["a"])(g,o,d,!1,null,"6d662520",null),y=I.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"填写数据",width:1200,visible:e.visible,destroyOnClose:""},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[this.json_data.length>0?a("div",{staticClass:"table-operator"},[a("download-excel",{attrs:{data:e.json_data,fields:e.json_fields,type:"csv",worksheet:"My Worksheet",name:"填写数据.xls"}},[a("a-button",{attrs:{type:"primary"}},[e._v("导出")])],1)],1):e._e(),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,showPagination:"auto"}})],1)},w=[],k=[{title:"用户 id",dataIndex:"id"},{title:"用户姓名",dataIndex:"name"},{title:"联系方式",dataIndex:"phone"},{title:"微信号",dataIndex:"wxCode"},{title:"填写时间",dataIndex:"createTime"},{title:"意向区域",dataIndex:"intentionPlace"},{title:"意见面积(㎡)",dataIndex:"intentionArea"},{title:"关注点",dataIndex:"attention"},{title:"其他补充",dataIndex:"other"}],V={props:{visible:{type:Boolean,required:!0},fId:{type:String,required:!0}},components:{STable:s["c"]},data:function(){var e=this;return this.columns=k,{queryParam:{},json_fields:{"用户 id":"id","用户姓名":"name","联系方式":"phone","微信号":"wxCode","填写时间":"createTime","意向区域":"intentionPlace","意见面积(㎡)":"intentionArea","关注点":"attention","其他补充":"other"},json_data:[],loadData:function(t){var a=Object.assign({formId:e.fId},t);return Object(l["T"])(a).then((function(e){return{data:e.data.data,page:a.page,total:e.data.total}}))}}},methods:{exportData:function(){}},created:function(){var e=this;Object(l["S"])({formId:this.fId}).then((function(t){e.json_data=t.data}))}},C=V,_=Object(b["a"])(C,x,w,!1,null,null,null),D=_.exports,O=[{title:"表单 id",dataIndex:"id"},{title:"表单名称",dataIndex:"title"},{title:"所属大V",dataIndex:"vname"},{title:"浏览次数",dataIndex:"pnum"},{title:"填写人数",dataIndex:"wnum"},{title:"链接",dataIndex:"linkUrl",scopedSlots:{customRender:"linkUrl"}},{title:"最近更新人",dataIndex:"updateUsername"},{title:"更新时间",dataIndex:"updateTime",sorter:!0},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],S={name:"FormList",components:{STable:s["c"],Ellipsis:s["b"],SelectV:r["a"],FormData:D,FormEdit:y},data:function(){var e=this;return this.columns=O,{visible:!1,formDataVisible:!1,formEditVisible:!1,data:{},mdl:null,vData:{name:""},isNotVUser:!Object(p["z"])(),fId:"",queryParam:{},loadData:function(t){var a=Object.assign({vid:Object(p["z"])()?Object(p["t"])():""},t,e.queryParam);return Object(l["V"])(a).then((function(e){return{data:e.data.data,total:e.data.total,page:a.page}}))}}},methods:{handleAdd:function(){this.$router.push("/form/create-form")},selectVData:function(e){e.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleFormDataCancel:function(){this.formDataVisible=!1},handleFormDataOk:function(){this.formDataVisible=!1},handleFormEditCancel:function(){this.formEditVisible=!1},handleFormEditOk:function(){this.formEditVisible=!1,this.$refs.table.loadData()},handleSelectVOk:function(e){this.visible=!1,null!==e&&void 0!==e&&""!==e&&(this.vData=e,this.queryParam.vid=e.id)},edit:function(e){this.fId=e.id,this.formEditVisible=!0},deleteForm:function(e){var t=this;this.$confirm({title:"确定要删除该表单吗?",content:"删除后无法复原,请谨慎",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(l["p"])(e.id).then((function(e){t.$notification.success({message:"删除成功"}),t.$refs.table.loadData()}))}})},writeData:function(e){this.fId=e.id,this.formDataVisible=!0}}},j=S,q=(a("1b2d"),Object(b["a"])(j,i,n,!1,null,null,null));t["default"]=q.exports},a754:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择大V",width:1200,visible:e.visible,footer:null},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"大V名字"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),this.selectedRowKeys.length>0?a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("选择")])],1):e._e(),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"vId",columns:e.columns,data:e.loadData,alert:this.isMultiple?e.options.alert:null,rowSelection:this.isMultiple?e.options.rowSelection:null,showPagination:"auto"},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("a-avatar",{attrs:{src:e}})],1)}},{key:"action",fn:function(t,i){return a("span",{},[[a("a",{on:{click:function(){e.$emit("ok",Object.assign({},i,{id:i.vId}))}}},[e._v("选择")])]],2)}}])})],1)},n=[],s=a("5530"),l=(a("d81d"),a("b0c0"),a("2af9")),r=a("0fea"),o=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],d=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"}],c={props:{visible:{type:Boolean,required:!0},isMultiple:{type:Boolean},selectKeys:{type:Array,default:function(){return[]}},selectRows:{type:Array,default:function(){return[]}}},components:{STable:l["c"]},methods:{onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},selectUser:function(){var e="",t="";this.selectedRows.map((function(a){e+=a.vId+",",t+=a.name+","})),e=e.substring(0,e.length-1),t=t.substring(0,t.length-1),this.$emit("ok",{name:t,id:e})}},data:function(){var e=this;return this.columns=this.isMultiple?d:o,{queryParam:{},selectedRowKeys:this.selectKeys,selectedRows:this.selectRows,options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectKeys,onChange:this.onSelectChange}},optionAlertShow:!1,loadData:function(t){var a=Object.assign({},t,e.queryParam);return Object(r["eb"])(a).then((function(e){return Object(s["a"])(Object(s["a"])({},e.data),{},{page:a.page})}))}}},created:function(){}},u=c,m=a("2877"),h=Object(m["a"])(u,i,n,!1,null,null,null);t["a"]=h.exports}}]);