(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1276eb2"],{"467e":function(e,t,a){},8853:function(e,t,a){"use strict";a("467e")},d6df:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"内容标题",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入内容标题"}]}],expression:"[\n            'title',\n            {rules: [{ required: true, message: '请输入内容标题' }]}\n          ]"}],attrs:{placeholder:"内容标题"}})],1),e.isNotVUser?a("a-form-item",{attrs:{label:"关联大V",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["vId"],expression:"[\n            'vId'\n          ]"}],staticClass:"select-v",attrs:{name:"vId"},on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])]):e._e(),a("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"封面图片",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic",{rules:[{required:!0,message:"请选择封面图片"}]}],expression:"[\n            'pic',\n            {rules: [{ required: true, message: '请选择封面图片' }]}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:e.getUploadPic,data:e.getData,headers:{Authorization:"Bearer "+e.token},"before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.pic?a("img",{staticClass:"pic",attrs:{src:e.pic,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),a("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸200*200px")])],1),a("a-form-item",{attrs:{label:"内容详情",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["des"],expression:"[\n            'des',\n          ]"}]},[a("quill-editor",{ref:"quill",attrs:{options:e.editorOption},on:{change:function(t){return e.onEditorChange(t)}}})],1)]),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))])],1)],1),a("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}})],1)],1)},n=[],r=a("a754"),s=a("9fb0"),l=a("8ded"),o=a.n(l),d=a("218c"),c=a.n(d),u=a("0fea"),p=(a("8096"),a("953d")),m=a("7b4b"),v=a("ca00");function f(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}p["Quill"].register("modules/ImageExtend",m["a"]);var g={name:"CreateContent",components:{SelectV:r["a"],quillEditor:p["quillEditor"]},data:function(){return{form:this.$form.createForm(this),vData:{name:""},loading:!1,pic:"",visible:!1,token:o.a.get(s["a"]),des:"",isNotVUser:!Object(v["z"])(),editorOption:{modules:{ImageExtend:{loading:!0,name:"file",headers:function(e){e.setRequestHeader("Authorization","Bearer "+o.a.get(s["a"]))},action:"http:https://365house-admin.zenyee.cn/api/admin/vuser/file/pub_upload",response:function(e){return e.data.extra}},toolbar:{container:m["c"],handlers:{image:function(){m["b"].emit(this.quill.id)}}}}}}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){var i,n,r,s,l,o,d;if(200!==(null===(i=a.pic)||void 0===i||null===(n=i.file)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.code))return void c.a.error({message:"图片上传失败, 请重新上传"});var p={vId:a.vId||Object(v["t"])(),title:a.title,des:a.des,pic:null===(s=a.pic)||void 0===s||null===(l=s.file)||void 0===l||null===(o=l.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.key};Object(u["d"])(p).then((function(e){t.$notification.success({message:"新建成功"}),t.$router.push("/content/content-list")}))}}))},getUploadPic:function(){return Object(v["s"])()},selectVData:function(e){e.preventDefault(),this.visible=!0},onEditorChange:function(e){this.form.setFieldsValue({des:e.html})},handleSelectVCancel:function(){this.visible=!1},handleSelectVOk:function(e){this.visible=!1,null!==e&&void 0!==e&&""!==e&&(this.vData=e,this.form.setFieldsValue({vId:e.id}))},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&f(e.file.originFileObj,(function(e){t.pic=e,t.loading=!1})):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("You can only upload JPG file!"),t},getData:function(e){return{file:e}}}},h=g,b=(a("8853"),a("2877")),C=Object(b["a"])(h,i,n,!1,null,"ae3fe432",null);t["default"]=C.exports}}]);