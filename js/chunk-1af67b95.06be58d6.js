(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1af67b95"],{"2ae9":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("page-header-wrapper",[t("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"合作伙伴名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入合作伙伴名称"}]}],expression:"[\n            'name',\n            {rules: [{ required: true, message: '请输入合作伙伴名称' }]}\n          ]"}],attrs:{name:"name",placeholder:"合作伙伴名称"}})],1),t("a-form-item",{staticClass:"avatar-uploader-container",attrs:{label:"图片",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["picKey",{rules:[{required:!0,message:"请选择图片"}]}],expression:"[\n            'picKey',\n            {rules: [{ required: true, message: '请选择图片' }]}\n          ]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload,"custom-request":e.customRequest},on:{change:e.handleChange}},[e.picUrl?t("img",{staticClass:"activity-pic",attrs:{src:e.picUrl,alt:"avatar"}}):t("div",[t("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)]),t("span",{staticStyle:{color:"grey","line-height":"20px","font-size":"10px"}},[e._v("图片建议尺寸660*200px")])],1),t("a-form-item",{attrs:{label:"跳转链接",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl",{rules:[{required:!0,message:"请输入跳转链接"}]}],expression:"[\n            'linkUrl',\n            {rules: [{ required: true, message: '请输入跳转链接' }]}\n          ]"}],attrs:{name:"name",placeholder:"跳转链接"}})],1),t("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))])],1)],1)],1)],1)},n=[],i=(t("99af"),t("b0c0"),t("ac1f"),t("1276"),t("5530")),s=t("9fb0"),o=t("8ded"),c=t.n(o),l=t("0fea"),u=t("ca00"),p=t("9b15"),d=t.n(p);function m(e,a){var t=new FileReader;t.addEventListener("load",(function(){return a(t.result)})),t.readAsDataURL(e)}var f={name:"CreatePartner",data:function(){return{form:this.$form.createForm(this),loading:!1,picKey:"",picUrl:"",previewVisible:!1,previewImage:"",fileList:[],token:c.a.get(s["a"])}},methods:{handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){if(!e){if(!a.picKey)return void a.$notification.error({message:"图片上传失败, 请重新上传"});var r=Object(i["a"])(Object(i["a"])({},t),{},{picUrl:a.picUrl,picKey:a.picKey});Object(l["a"])(r).then((function(e){a.$notification.success({message:"新建成功"}),a.$router.push("/partner/list")}))}}))},customRequest:function(e){var a=this,t=this,r=e.file;Object(l["g"])().then((function(e){var n=e.data,i=n.accessKeyId,s=n.accessKeySecret,o=n.securityToken,c=new d.a({region:"oss-cn-shanghai",accessKeyId:i,accessKeySecret:s,bucket:"huibo91",stsToken:o}),u=r.name.split("."),p="pictures_admin_".concat(u[0],"_").concat(Date.now(),"_").concat(1e16*Math.random(),".").concat(u[1]||"");c.multipartUpload(p,r,{progress:function(e,a){}}).then((function(e){t.$notification.success({message:"上传成功"});e.res.requestUrls[0].split("?")[0];Object(l["i"])({key:p}).then((function(e){a.picUrl=e.data.publicUrl,a.loading=!1,a.picKey=p})).catch((function(e){t.$notification.error({message:"获取图片链接失败"})}))})).catch((function(e){t.$notification.error({message:"上传失败"})}))}))},handleChange:function(e){var a=this;"uploading"!==e.file.status?"done"===e.file.status&&m(e.file.originFileObj,(function(e){a.pic=e,a.loading=!1})):this.loading=!0},beforeUpload:function(e){var a="image/jpeg"===e.type||"image/png"===e.type;return a||this.$message.error("You can only upload JPG file!"),a},getData:function(e){return{file:e}},getBatchData:function(e){return[{file:e}]},handleCancel:function(){this.previewVisible=!1},getUploadPic:function(){return Object(u["a"])()}}},g=f,h=(t("bce0"),t("2877")),b=Object(h["a"])(g,r,n,!1,null,"dc5628a0",null);a["default"]=b.exports},bce0:function(e,a,t){"use strict";var r=t("d24a"),n=t.n(r);n.a},d24a:function(e,a,t){}}]);