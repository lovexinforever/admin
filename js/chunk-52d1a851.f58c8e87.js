(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d1a851"],{5628:function(e,a,t){},7163:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("page-header-wrapper",[t("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"优惠券类型",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},required:!0}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:this.couponConfig.couponType.purchase}],expression:"['type', { initialValue: this.couponConfig.couponType.purchase }]"}]},[t("a-radio",{attrs:{value:this.couponConfig.couponType.purchase}},[e._v("购房服务抵用券")]),t("a-radio",{attrs:{value:this.couponConfig.couponType.service}},[e._v("购房礼金券")])],1)],1),t("a-form-item",{attrs:{label:"所属大V",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["vId",{rules:[{required:!0,message:"请选择大V"}]}],expression:"[\n            'vId',\n            {rules: [{ required: true, message: '请选择大V' }]}\n          ]"}],staticClass:"select-v",attrs:{name:"vId"},on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])]),t("a-form-item",{attrs:{label:"优惠券名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入优惠券名称"}]}],expression:"[\n            'name',\n            {rules: [{ required: true, message: '请输入优惠券名称' }]}\n          ]"}],attrs:{name:"name",placeholder:"优惠券名称"}})],1),t("a-form-item",{attrs:{label:"优惠券金额",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["amt",{rules:[{required:!0,message:"请输入优惠券金额"}]}],expression:"[\n            'amt',\n            {rules: [{ required: true, message: '请输入优惠券金额' }]}\n          ]"}],attrs:{name:"name",prefix:"￥",suffix:"元",placeholder:"优惠券金额"}})],1),t("a-form-item",{staticClass:"num",attrs:{label:"发放数量",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["grantNum",{rules:[{required:!0,message:"发放数量"}]}],expression:"[\n            'grantNum',\n            {rules: [{ required: true, message: '发放数量' }]}\n          ]"}],attrs:{min:0,placeholder:"发放数量"}})],1),t("a-form-item",{attrs:{label:"有效期",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["time",{rules:[{required:!0,message:"请选择有效期"}]}],expression:"[\n            'time',\n            {rules: [{ required: true, message: '请选择有效期' }]}\n          ]"}],staticStyle:{width:"100%"},attrs:{name:"time"}})],1),t("a-form-item",{attrs:{label:"单用户限领",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},required:!0}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["drawNumType",{initialValue:0}],expression:"['drawNumType', { initialValue: 0 }]"}]},[t("a-radio",{attrs:{value:0}},[e._v("不限")]),t("a-radio",{attrs:{value:1}},[e._v("限制")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.getFieldValue("drawNumType"),expression:"form.getFieldValue('drawNumType') === 1"}]},[t("span",[e._v("限领 ")]),t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["drawNumSingleNum",{rules:[{required:1===e.form.getFieldValue("drawNumType"),message:"输入限领个数"}]}],expression:"[\n              'drawNumSingleNum',\n              {rules: [{ required: form.getFieldValue('drawNumType') === 1, message: '输入限领个数' }]}\n            ]"}],attrs:{name:"drawNumSingleNum",min:1}}),t("span",[e._v(" 张")])],1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("type")!==this.couponConfig.couponType.service,expression:"form.getFieldValue('type') !== this.couponConfig.couponType.service"}],attrs:{label:"使用门槛",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},required:!0}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["useThresholdType",{initialValue:0}],expression:"['useThresholdType', { initialValue: 0 }]"}]},[t("a-radio",{attrs:{value:0}},[e._v("不限")]),t("a-radio",{attrs:{value:1}},[e._v("限制")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.getFieldValue("useThresholdType"),expression:"form.getFieldValue('useThresholdType') === 1"}]},[t("span",[e._v("满 ")]),t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["useThreshold",{rules:[{required:1===e.form.getFieldValue("useThresholdType"),message:"输入门槛金额"}]}],expression:"[\n              'useThreshold',\n              {rules: [{ required: form.getFieldValue('useThresholdType') === 1, message: '输入门槛金额' }]}\n            ]"}],attrs:{name:"useThreshold",min:1}}),t("span",[e._v(" 元可用")])],1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("type")!==this.couponConfig.couponType.service,expression:"form.getFieldValue('type') !== this.couponConfig.couponType.service"}],attrs:{label:"适用商品",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}},required:!0}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["suitProductsType",{initialValue:0}],expression:"['suitProductsType', { initialValue: 0 }]"}]},[t("a-radio",{attrs:{value:0}},[e._v("不限")]),t("a-radio",{attrs:{value:1}},[e._v("限制")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.getFieldValue("suitProductsType"),expression:"form.getFieldValue('suitProductsType') === 1"}]},[t("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["suitProducts",{rules:[{required:1===e.form.getFieldValue("suitProductsType"),message:"选择适用商品"}]}],expression:"[\n              'suitProducts',\n              {rules: [{ required: form.getFieldValue('suitProductsType') === 1, message: '选择适用商品' }]}\n            ]"}],attrs:{name:"suitProducts",options:[{label:"购房服务",value:1},{label:"购房讲堂",value:2}]}})],1)],1),t("a-form-item",{attrs:{label:"使用说明",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["des"],expression:"[\n            'des',\n          ]"}],attrs:{rows:"4",name:"des",placeholder:"说明"}})],1),t("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v(e._s(e.$t("form.basic-form.form.submit")))])],1)],1),t("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}})],1)],1)},s=[],o=(t("b0c0"),t("a754")),n=t("a078"),i=t("0fea"),l={name:"NewCoupon",components:{SelectV:o["a"]},data:function(){return this.couponConfig=n["e"],{form:this.$form.createForm(this),vData:{name:""},visible:!1}},methods:{handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){if(!e){var r=parseFloat(t.amt);if(isNaN(r))return void a.$notification.error({message:"输入的金额不是数字"});if(r<0)return void a.$notification.error({message:"输入的金额不能小于 0"});var s={vId:t.vId,type:t.type,name:t.name,amt:100*r,grantNum:parseInt(t.grantNum),drawNumSingleNum:t.drawNumSingleNum?parseInt(t.drawNumSingleNum):0,useThreshold:t.useThreshold?100*parseInt(t.useThreshold):0,suitProducts:t.suitProducts?t.suitProducts:[],des:t.des,startTime:t.time[0].format("YYYY-MM-DD HH:mm:ss"),endTime:t.time[1].format("YYYY-MM-DD HH:mm:ss")};Object(i["f"])(s).then((function(e){a.$notification.success({message:"新建成功"}),a.$router.push("/coupon/coupon-list")}))}}))},selectVData:function(e){e.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleSelectVOk:function(e){this.visible=!1,null!==e&&void 0!==e&&""!==e&&(this.vData=e,this.form.setFieldsValue({vId:e.id}))}}},u=l,m=(t("c184"),t("2877")),d=Object(m["a"])(u,r,s,!1,null,"08969570",null);a["default"]=d.exports},a754:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"选择大V",width:1200,visible:e.visible,footer:null},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"大V名字"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.name,callback:function(a){e.$set(e.queryParam,"name",a)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"手机号"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.phone,callback:function(a){e.$set(e.queryParam,"phone",a)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),this.selectedRowKeys.length>0?t("div",{staticClass:"table-operator"},[t("a-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("选择")])],1):e._e(),t("s-table",{ref:"table",attrs:{size:"default",rowKey:"vId",columns:e.columns,data:e.loadData,alert:this.isMultiple?e.options.alert:null,rowSelection:this.isMultiple?e.options.rowSelection:null,showPagination:"auto"},scopedSlots:e._u([{key:"avatar",fn:function(e){return t("span",{},[t("a-avatar",{attrs:{src:e}})],1)}},{key:"action",fn:function(a,r){return t("span",{},[[t("a",{on:{click:function(){e.$emit("ok",Object.assign({},r,{id:r.vId}))}}},[e._v("选择")])]],2)}}])})],1)},s=[],o=t("5530"),n=(t("d81d"),t("b0c0"),t("2af9")),i=t("0fea"),l=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],u=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"}],m={props:{visible:{type:Boolean,required:!0},isMultiple:{type:Boolean},selectKeys:{type:Array,default:function(){return[]}},selectRows:{type:Array,default:function(){return[]}}},components:{STable:n["c"]},methods:{onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},selectUser:function(){var e="",a="";this.selectedRows.map((function(t){e+=t.vId+",",a+=t.name+","})),e=e.substring(0,e.length-1),a=a.substring(0,a.length-1),this.$emit("ok",{name:a,id:e})}},data:function(){var e=this;return this.columns=this.isMultiple?u:l,{queryParam:{},selectedRowKeys:this.selectKeys,selectedRows:this.selectRows,options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectKeys,onChange:this.onSelectChange}},optionAlertShow:!1,loadData:function(a){var t=Object.assign({},a,e.queryParam);return Object(i["eb"])(t).then((function(e){return Object(o["a"])(Object(o["a"])({},e.data),{},{page:t.page})}))}}},created:function(){}},d=m,c=t("2877"),p=Object(c["a"])(d,r,s,!1,null,null,null);a["a"]=p.exports},c184:function(e,a,t){"use strict";t("5628")}}]);