(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cd4766e"],{"365a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("page-header-wrapper",[i("a-card",{attrs:{bordered:!1}},[i("div",{staticClass:"table-page-search-wrapper"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"楼盘名称"}},[i("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),e.isNotVUser?i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"所属大V"}},[i("div",{staticClass:"select-v",on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])])],1):e._e(),i("a-col",{attrs:{md:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.queryParam={},t.vData={name:""}}}},[e._v("重置")])],1)])],1)],1)],1),i("div",{staticClass:"table-operator"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建")])],1),i("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,scroll:{x:!0},showPagination:"auto"},scopedSlots:e._u([{key:"photo",fn:function(t){return i("span",{},[i("img",{staticClass:"activity-pic",attrs:{src:t,alt:"活动图片"}})])}},{key:"label",fn:function(t){return t?i("span",{},e._l(t.split(","),(function(t,a){return i("a-tag",{key:t+a,attrs:{color:e.getColor()}},[e._v(" "+e._s(t)+" ")])})),1):e._e()}},{key:"action",fn:function(t,a){return i("span",{},[[i("a",{on:{click:function(t){return e.edit(a)}}},[e._v("编辑")]),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.deleteBuilding(a)}}},[e._v("删除")])]],2)}}],null,!0)}),i("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}}),e.buildingEditVisible?i("building-edit",{attrs:{visible:e.buildingEditVisible,id:e.data.id},on:{cancel:e.handleBuildingEditCancel,ok:e.handleBuildingEditOk}}):e._e()],1)],1)},n=[],s=a("2af9"),r=a("0fea"),l=a("a754"),c=a("a078"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"编辑楼盘",width:1200,visible:t.visible,footer:null,destroyOnClose:""},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:t.currentTab}},[a("a-step",{attrs:{title:"基本信息"}}),a("a-step",{attrs:{title:"配套信息"}}),a("a-step",{attrs:{title:"评分信息"}}),a("a-step",{attrs:{title:"户型信息"}}),a("a-step",{attrs:{title:"动态信息"}})],1),a("div",{staticClass:"content"},[t.data?a("basic-info",{directives:[{name:"show",rawName:"v-show",value:0===t.currentTab,expression:"currentTab === 0"}],attrs:{detail:t.data},on:{nextStep:t.nextStep}}):t._e(),t.data?a("match-info",{directives:[{name:"show",rawName:"v-show",value:1===t.currentTab,expression:"currentTab === 1"}],attrs:{detail:t.data},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),t.data?a("score-info",{directives:[{name:"show",rawName:"v-show",value:2===t.currentTab,expression:"currentTab === 2"}],attrs:{detail:t.data},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),t.data?a("house-type-info",{directives:[{name:"show",rawName:"v-show",value:3===t.currentTab,expression:"currentTab === 3"}],attrs:{detail:t.data},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),t.data?a("dynamic-info",{directives:[{name:"show",rawName:"v-show",value:4===t.currentTab,expression:"currentTab === 4"}],attrs:{detail:t.data},on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)],1)},d=[],u=a("8451"),p=a("8a50"),f=a("2f9af"),h=a("0a2d"),b=a("3d06"),v={props:{visible:{type:Boolean,required:!0},id:{type:String,required:!0}},components:{BasicInfo:u["a"],MatchInfo:p["a"],ScoreInfo:f["a"],HouseTypeInfo:h["a"],DynamicInfo:b["a"]},data:function(){return{currentTab:0,data:null}},methods:{nextStep:function(){this.currentTab<5&&(this.currentTab+=1)},prevStep:function(){this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.$emit("ok")}},created:function(){var t=this;Object(r["G"])(this.id).then((function(e){t.data=e.data}))}},m=v,g=a("2877"),y=Object(g["a"])(m,o,d,!1,null,"e63f84f6",null),x=y.exports,S=a("411c"),k=a.n(S),w=a("ca00"),_=[{title:"楼盘id",dataIndex:"id"},{title:"楼盘名称",dataIndex:"name"},{title:"楼盘图片",dataIndex:"photo",scopedSlots:{customRender:"photo"}},{title:"特色标签",scopedSlots:{customRender:"label"},dataIndex:"label"},{title:"销售均价",dataIndex:"averagePrice",scopedSlots:{customRender:"averagePrice"}},{title:"关联大V",dataIndex:"vname"},{title:"最近更新人",dataIndex:"updateUsername"},{title:"更新时间",dataIndex:"updateTime",sorter:!0},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],E={name:"BuildingList",components:{STable:s["c"],Ellipsis:s["b"],SelectV:l["a"],BuildingEdit:x},data:function(){var t=this;return this.columns=_,this.activityConfig=c["a"],{visible:!1,buildingEditVisible:!1,aId:"",data:{},mdl:null,vData:{name:""},queryParam:{},isNotVUser:!Object(w["z"])(),loadData:function(e){var a=Object.assign({vId:Object(w["z"])()?Object(w["t"])():""},e,t.queryParam);return Object(r["H"])(a).then((function(t){return{data:t.data.data,total:t.data.total,page:a.page}}))}}},methods:{handleAdd:function(){this.$router.push("/building/create-building")},getColor:function(){return c["l"][k.a.mock("@integer(0, 6)")]},selectVData:function(t){t.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleSelectVOk:function(t){this.visible=!1,null!==t&&void 0!==t&&""!==t&&(this.vData=t,this.queryParam.vId=t.id)},handleBuildingEditCancel:function(){this.buildingEditVisible=!1},handleBuildingEditOk:function(){this.buildingEditVisible=!1,this.$refs.table.loadData()},deleteBuilding:function(t){var e=this;this.$confirm({title:"确定要删除该楼盘吗?",content:"删除后无法复原,请谨慎",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(r["n"])(t.id).then((function(t){e.$notification.success({message:"删除成功"}),e.$refs.table.loadData()}))}})},edit:function(t){this.data=t,this.buildingEditVisible=!0},handleActivityEnterCancel:function(){this.activityEnterVisible=!1},handleActivityEnterOk:function(){this.activityEnterVisible=!1},handleActivityEditCancel:function(){this.activityEditVisible=!1},handleActivityEditOk:function(){this.activityEditVisible=!1,this.$refs.table.loadData()}}},T=E,V=(a("e44f"),Object(g["a"])(T,i,n,!1,null,null,null));e["default"]=V.exports},"980a":function(t,e,a){},e44f:function(t,e,a){"use strict";a("980a")}}]);