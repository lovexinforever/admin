(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d5c6934"],{"3fa3":function(t,e,a){"use strict";a("5861")},5861:function(t,e,a){},81192:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("page-header-wrapper",[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"券名称"}},[n("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"券类型"}},[n("a-select",{attrs:{placeholder:"请选择券类型"},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[n("a-select-option",{attrs:{value:this.couponConfig.couponType.purchase}},[e._v("购房服务抵用券")]),n("a-select-option",{attrs:{value:this.couponConfig.couponType.service}},[e._v("购房礼金券")])],1)],1)],1),e.advanced?[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"券状态"}},[n("a-select",{attrs:{placeholder:"请选择券状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[n("a-select-option",{attrs:{value:this.couponConfig.couponStatus.deactivate}},[e._v("停用")]),n("a-select-option",{attrs:{value:this.couponConfig.couponStatus.normal}},[e._v("正常")]),n("a-select-option",{attrs:{value:this.couponConfig.couponStatus.finish}},[e._v("领完")])],1)],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"创建人"}},[n("a-input",{attrs:{placeholder:"创建人"},model:{value:e.queryParam.createUsername,callback:function(t){e.$set(e.queryParam,"createUsername",t)},expression:"queryParam.createUsername"}})],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"券 id"}},[n("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.id,callback:function(t){e.$set(e.queryParam,"id",t)},expression:"queryParam.id"}})],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"所属大V"}},[n("div",{staticClass:"select-v",on:{click:e.selectVData}},[e._v(e._s(e.vData.name))])])],1)]:e._e(),n("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.queryParam={},t.vData={name:""}}}},[e._v("重置")]),n("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),n("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建")])],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,scroll:{x:!0},data:e.loadData,showPagination:"auto"},scopedSlots:e._u([{key:"type",fn:function(t){return n("span",{},[e._v(" "+e._s(e.getCouponType(t))+" ")])}},{key:"amt",fn:function(t){return n("span",{},[e._v(" ¥"+e._s(parseFloat((t/100).toString()).toFixed(2))+" ")])}},{key:"status",fn:function(t){return n("span",{},[e._v(" "+e._s(e.getCouponStatus(t))+" ")])}},{key:"useStatus",fn:function(t,a){return n("span",{},[e._v(" "+e._s(a.drawNum)+"/"+e._s(a.useNum)+"/"+e._s(a.grantNum)+" ")])}},{key:"time",fn:function(t,a){return n("span",{},[e._v(" "+e._s(a.startTime)+"-"+e._s(a.endTime)+" ")])}},{key:"action",fn:function(t,a){return n("span",{},[[n("a",{on:{click:function(t){return e.showData(a)}}},[e._v("数据")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.action(a)}}},[e._v(e._s(e.getCouponActionStatus(a.status)))])]],2)}}])}),n("select-v",{attrs:{visible:e.visible},on:{cancel:e.handleSelectVCancel,ok:e.handleSelectVOk}}),e.couponUseVisible?n("coupon-use-data",{attrs:{visible:e.couponUseVisible,"c-id":e.cId},on:{cancel:e.handleCouponUseCancel,ok:e.handleCouponUseOk}}):e._e()],1)],1)},s=[],o=a("5530"),i=a("2af9"),r=a("0fea"),l=a("a754"),c=a("a5a9"),u=a("ca00"),d=a("a078"),p=[{title:"券id",dataIndex:"id"},{title:"券名称",dataIndex:"name"},{title:"券类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"所属大V",dataIndex:"vName"},{title:"券面额",scopedSlots:{customRender:"amt"},dataIndex:"amt"},{title:"状态",scopedSlots:{customRender:"status"},dataIndex:"status"},{title:"发放数/已使用/总数",scopedSlots:{customRender:"useStatus"}},{title:"有效期",scopedSlots:{customRender:"time"}},{title:"创建人",dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",sorter:!0},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],m={name:"CouponList",components:{STable:i["c"],Ellipsis:i["b"],SelectV:l["a"],CouponUseData:c["a"]},data:function(){var t=this;return this.columns=p,this.couponConfig=d["e"],{visible:!1,couponUseVisible:!1,cId:"",mdl:null,advanced:!1,vData:{name:""},queryParam:{},loadData:function(e){var a=Object.assign({},e,t.queryParam);return Object(r["M"])(a).then((function(t){return Object(o["a"])(Object(o["a"])({},t.data),{},{page:a.page})}))}}},methods:{handleAdd:function(){this.$router.push("/coupon/create-coupon")},selectVData:function(t){t.preventDefault(),this.visible=!0},handleSelectVCancel:function(){this.visible=!1},handleSelectVOk:function(t){this.visible=!1,null!==t&&void 0!==t&&""!==t&&(this.vData=t,this.queryParam.vid=t.id)},getCouponType:function(t){return Object(u["f"])(t)},getCouponStatus:function(t){return Object(u["e"])(t)},getCouponActionStatus:function(t){return t===d["e"].couponStatus.deactivate?"启用":"停用"},showDetail:function(t){},showData:function(t){this.cId=t.id,this.couponUseVisible=!0},action:function(t){var e=this;t.status===d["e"].couponStatus.deactivate?Object(r["z"])(t.id).then((function(t){e.$refs.table.loadData()})):Object(r["rb"])(t.id).then((function(t){e.$refs.table.loadData()}))},handleCouponUseCancel:function(){this.couponUseVisible=!1},handleCouponUseOk:function(){this.couponUseVisible=!1},toggleAdvanced:function(){this.advanced=!this.advanced}}},f=m,h=(a("3fa3"),a("2877")),v=Object(h["a"])(f,n,s,!1,null,null,null);e["default"]=v.exports},a5a9:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"领用数据",width:1200,visible:t.visible,destroyOnClose:""},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[this.json_data.length>0?a("div",{staticClass:"table-operator"},[a("download-excel",{attrs:{data:t.json_data,fields:t.json_fields,type:"csv",worksheet:"My Worksheet",name:"优惠券领取.xls"}},[a("a-button",{attrs:{type:"primary"}},[t._v("导出")])],1)],1):t._e(),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData,showPagination:"auto"},scopedSlots:t._u([{key:"isUse",fn:function(e){return a("span",{},[t._v(" "+t._s(t.getUseStatus(e))+" ")])}}])})],1)},s=[],o=a("5530"),i=a("2af9"),r=a("0fea"),l=a("ca00"),c=[{title:"用户 id",dataIndex:"userId"},{title:"用户姓名",dataIndex:"name"},{title:"联系方式",dataIndex:"phone"},{title:"领取时间",dataIndex:"drawTime"},{title:"是否使用",dataIndex:"isUse",scopedSlots:{customRender:"isUse"}},{title:"使用时间",dataIndex:"useTime"}],u={props:{visible:{type:Boolean,required:!0},cId:{type:String,required:!0}},components:{STable:i["c"]},data:function(){var t=this;return this.columns=c,{queryParam:{},json_fields:{"用户 id":"userId","用户姓名":"name","联系方式":"phone","领取时间":"drawTime","是否使用":{field:"isUse",callback:function(t){return Object(l["g"])(t)}},"使用时间":"useTime"},json_data:[],loadData:function(e){var a=Object.assign({},e,{id:t.cId});return Object(r["O"])(a).then((function(t){return Object(o["a"])(Object(o["a"])({},t.data),{},{page:a.page})}))}}},methods:{exportData:function(){},getUseStatus:function(t){return Object(l["g"])(t)}},created:function(){var t=this;Object(r["N"])({id:this.cId}).then((function(e){t.json_data=e.data}))}},d=u,p=a("2877"),m=Object(p["a"])(d,n,s,!1,null,null,null);e["a"]=m.exports},a754:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择大V",width:1200,visible:t.visible,footer:null},on:{ok:function(){t.$emit("ok")},cancel:function(){t.$emit("cancel")}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"大V名字"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.phone,callback:function(e){t.$set(t.queryParam,"phone",e)},expression:"queryParam.phone"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{float:"right",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")])],1)])],1)],1)],1),this.selectedRowKeys.length>0?a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary"},on:{click:t.selectUser}},[t._v("选择")])],1):t._e(),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"vId",columns:t.columns,data:t.loadData,alert:this.isMultiple?t.options.alert:null,rowSelection:this.isMultiple?t.options.rowSelection:null,showPagination:"auto"},scopedSlots:t._u([{key:"avatar",fn:function(t){return a("span",{},[a("a-avatar",{attrs:{src:t}})],1)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(){t.$emit("ok",Object.assign({},n,{id:n.vId}))}}},[t._v("选择")])]],2)}}])})],1)},s=[],o=a("5530"),i=(a("d81d"),a("b0c0"),a("2af9")),r=a("0fea"),l=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],c=[{title:"大V编号",dataIndex:"vId"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"名字",dataIndex:"name"},{title:"手机号",dataIndex:"phone"}],u={props:{visible:{type:Boolean,required:!0},isMultiple:{type:Boolean},selectKeys:{type:Array,default:function(){return[]}},selectRows:{type:Array,default:function(){return[]}}},components:{STable:i["c"]},methods:{onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},selectUser:function(){var t="",e="";this.selectedRows.map((function(a){t+=a.vId+",",e+=a.name+","})),t=t.substring(0,t.length-1),e=e.substring(0,e.length-1),this.$emit("ok",{name:e,id:t})}},data:function(){var t=this;return this.columns=this.isMultiple?c:l,{queryParam:{},selectedRowKeys:this.selectKeys,selectedRows:this.selectRows,options:{alert:{show:!0,clear:function(){t.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectKeys,onChange:this.onSelectChange}},optionAlertShow:!1,loadData:function(e){var a=Object.assign({},e,t.queryParam);return Object(r["eb"])(a).then((function(t){return Object(o["a"])(Object(o["a"])({},t.data),{},{page:a.page})}))}}},created:function(){}},d=u,p=a("2877"),m=Object(p["a"])(d,n,s,!1,null,null,null);e["a"]=m.exports}}]);